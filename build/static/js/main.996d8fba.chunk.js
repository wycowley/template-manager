(this["webpackJsonptemplate-manager"]=this["webpackJsonptemplate-manager"]||[]).push([[0],{53:function(e,t,n){},67:function(e,t,n){},69:function(e,t,n){},80:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var c=n(8),a=n.n(c),s=n(54),o=n.n(s),i=n(12),r=(n(67),n(55)),l=(n(91),Object(r.a)({apiKey:"AIzaSyATNn2F0KJSKE75CEonDPtY3Q9OVZXodm0",authDomain:"template-manager-4f0cc.firebaseapp.com",projectId:"template-manager-4f0cc",storageBucket:"template-manager-4f0cc.appspot.com",messagingSenderId:"558222395374",appId:"1:558222395374:web:44e98352458d99ba93b0ff",measurementId:"G-73KRE4N508"}),n(24)),j=n(15),b=n(30),d=n(27),u=(n(69),n(57)),O=n.n(u),f=n(7),h=new d.a,m=Object(d.b)(),p=function(e){var t=Object(c.useState)(!1),n=Object(i.a)(t,2),a=n[0],s=n[1];return Object(f.jsxs)("div",{className:"other-container",children:[Object(f.jsx)(O.a,{onClick:function(){Object(d.c)(m,h).then((function(e){d.a.credentialFromResult(e).accessToken,e.user;s(!0)})).catch((function(e){e.code,e.message,e.email,d.a.credentialFromError(e)}))},className:"google-button",children:"Sign in with Google"}),a?Object(f.jsx)(j.a,{to:"/dashboard"}):Object(f.jsx)(f.Fragment,{})]})},x=n(29),g=(n(80),Object(d.b)()),v=function(e){var t=Object(j.g)(),n=Object(b.a)(g),c=Object(i.a)(n,3),a=c[0],s=c[1];c[2];return Object(f.jsxs)("div",{className:"top-nav",children:[Object(f.jsx)(x.a,{className:"icon"}),Object(f.jsx)("h2",{class:"no-hover",children:"Template Manager"}),Object(f.jsx)(l.b,{to:"/dashboard",style:{color:"black"},children:Object(f.jsx)("h2",{children:"Home"})}),Object(f.jsx)(l.b,{to:"/create",style:{color:"black"},children:Object(f.jsx)("h2",{children:"Create New"})}),Object(f.jsxs)("div",{className:"profile-section",children:[Object(f.jsx)("button",{onClick:function(){Object(d.d)(g).then((function(){t.push("/signin")})).catch((function(e){}))},className:"sign-out",children:Object(f.jsx)("h2",{className:"non-default-h2",children:"Sign Out"})}),s||void 0==a?Object(f.jsx)(f.Fragment,{}):Object(f.jsx)("div",{className:"profile-img-container",children:Object(f.jsx)("img",{src:a.photoURL,className:"profile-image"})})]})]})},w=n(1),N=n.n(w),y=n(2),k=n(33),S=n(14),C=n(36),F=function(e){var t=Object(c.useState)("Loading..."),n=Object(i.a)(t,2),a=n[0],s=n[1];return Object(c.useEffect)((function(){console.log(e.timestamp.toDate());var t=e.timestamp.toDate()+"";t=t.split(" "),console.log(t),t=t[4]+" "+t[1]+" "+t[2],s(t)}),[]),Object(f.jsxs)("div",{className:"folder-viewer-container",children:[Object(f.jsxs)("div",{className:"first-row",children:[Object(f.jsx)("p",{className:"folder-title",children:e.name}),Object(f.jsx)(l.b,{to:"/edit/"+e.id,className:"edit-link",children:Object(f.jsx)(C.a,{style:{width:"100%",height:"100%",fill:"rgb(44, 44, 83)"}})})]}),Object(f.jsx)("p",{children:"Last Edited "+a}),Object(f.jsxs)("div",{className:"last-row",children:[Object(f.jsx)(l.b,{to:"/download/"+e.id+"/"+e.userId,children:Object(f.jsx)("button",{className:"action-button",children:"Download all files"})}),Object(f.jsx)("button",{className:"action-button",onClick:function(){var t="https://www.wyattcowley.com/template-manager/#/download/";t=t+e.id+"/"+e.userId,navigator.clipboard.writeText(t)},children:"Copy download link"})]})]})},E=(n(82),Object(k.b)()),D=Object(S.f)(),L=function(e){var t=Object(b.a)(E),n=Object(i.a)(t,3),a=n[0],s=n[1],o=(n[2],Object(c.useState)({})),r=Object(i.a)(o,2),l=r[0],j=r[1],d=Object(c.useState)(!1),u=Object(i.a)(d,2),O=u[0],h=u[1];function m(){return(m=Object(y.a)(N.a.mark((function e(){var t,n,c,s,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(S.c)(D,"users",a.uid),n=Object(S.h)(Object(S.b)(t,"folders"),Object(S.g)("timestamp","desc")),e.next=4,Object(S.e)(n);case 4:c=e.sent,s={},o=0,c.forEach((function(e){s[e.id]=e.data(),o++})),0==o&&h(!0),console.log(s),j(s);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){s||function(){m.apply(this,arguments)}()}),[s]),Object(f.jsxs)("div",{className:"dashboard-container",children:[Object(f.jsx)("h1",{style:{textDecoration:"underline"},children:"Recent Templates"}),Object(f.jsxs)("div",{className:"folder-container",children:[Object.keys(l).map((function(e){return Object(f.jsx)(F,{name:l[e].name,id:e,userId:a.uid,timestamp:l[e].timestamp})})),O?Object(f.jsx)("p",{children:"To get started, add a project"}):Object(f.jsx)(f.Fragment,{})]})]})},I=n(28),T=(n(48),n(83),Object(I.f)()),A=function(e){var t=Object(j.h)().id,a=Object(j.h)().userId,s=Object(c.useState)("Loading"),o=Object(i.a)(s,2),r=(o[0],o[1],Object(c.useState)({})),b=Object(i.a)(r,2),d=b[0],u=b[1];function O(){return(O=Object(y.a)(N.a.mark((function e(){var n,c,s,o,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(I.c)(T,"users",a),c=Object(I.c)(n,"folders",t),e.next=4,Object(I.d)(c);case 4:return e.sent,s=Object(I.h)(Object(I.b)(c,"files")),console.log(s),e.next=9,Object(I.e)(s);case 9:o=e.sent,0,i={},o.forEach((function(e){i[e.id]=e.data(),console.log(e.id," => ",e.data())})),u(i),console.log("Set state"),console.log(d);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){console.log(t,a),function(){O.apply(this,arguments)}()}),[]),Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("h1",{className:"warning-message",children:"Warning: You are about to download the following files"}),Object(f.jsx)(l.b,{to:"/home",className:"return-message",children:"Return back to homepage"}),Object.keys(d).map((function(e){return Object(f.jsxs)("div",{className:"thing",children:[Object(f.jsx)("p",{children:d[e].name}),Object(f.jsx)("span",{})]})})),Object(f.jsx)("button",{onClick:function(){var e=n(48);Object.keys(d).forEach((function(t){var n=new Blob([d[t].data],{type:"text/plain;charset=utf-8"});e.saveAs(n,[d[t].name])}))},className:"button",children:"Download All"})]})},U=Object(S.f)(),B=function(e){var t=Object(j.g)();function n(){return(n=Object(y.a)(N.a.mark((function n(c){var a;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(S.j)(c,{uid:e.user.uid,displayName:e.user.displayName});case 2:return n.next=4,Object(S.a)(Object(S.b)(c,"folders"),{name:"Untitled",owner:e.user.uid});case 4:return a=n.sent,n.next=7,Object(S.j)(Object(S.c)(a,"files","Untitled.FileExtension"),{name:"Untitled.FileExtension",data:"Start typing here"});case 7:n.sent,console.log(a.id),t.push("/edit/"+a.id);case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(c.useEffect)((function(){console.log(e.user.uid),function(e){n.apply(this,arguments)}(Object(S.c)(U,"users",e.user.uid))}),[]),Object(f.jsx)(f.Fragment,{})},P=n(60),R=n(61),K=n.n(R),M=n(62),J=n.n(M),G=(n(53),n(89),function(e){var t=Object(c.useState)(!1),n=Object(i.a)(t,2),a=n[0],s=n[1],o=Object(c.useState)(e.name),r=Object(i.a)(o,2),l=r[0],j=r[1],b=Object(c.useState)(e.data),d=Object(i.a)(b,2),u=d[0],O=d[1];return Object(c.useEffect)((function(){j(e.name),O(e.data)}),[e]),Object(f.jsxs)("div",{className:"file-specific-section",children:[a?Object(f.jsx)("input",{value:l,onChange:function(e){j(e.target.value)},className:"title-entry"}):Object(f.jsx)("h2",{className:"file-title",children:e.name}),Object(f.jsx)("button",{onClick:function(){1==a&&e.onTitleChange(l),s(!a)},className:"edit-title-button",children:a?Object(f.jsx)(x.b,{className:"edit-title-icon"}):Object(f.jsx)(C.a,{className:"edit-title-icon"})}),Object(f.jsx)(J.a,{onChange:function(t){O(t),e.onDataChange(t)},height:"80%",width:"95%",className:"code-editor",theme:"xcode",name:"main-code-editor",value:u,editorProps:{$blockScrolling:!0}})]})}),H=Object(S.f)(),Y=Object(k.b)(),z=function(e){var t=Object(b.a)(Y),n=Object(i.a)(t,3),a=n[0],s=n[1],o=(n[2],Object(c.useState)("Loading...")),r=Object(i.a)(o,2),d=r[0],u=r[1],O=Object(c.useState)({saMPle:{data:"",name:""}}),h=Object(i.a)(O,2),m=h[0],p=h[1],g=Object(c.useState)({id:1}),v=Object(i.a)(g,2),w=v[0],k=v[1],F=Object(c.useState)("Save Changes"),E=Object(i.a)(F,2),D=E[0],L=E[1],I=Object(c.useState)(!1),T=Object(i.a)(I,2),A=T[0],U=T[1],B=Object(c.useState)(["Loading",{data:"Loading files...",name:"Loading..."}]),R=Object(i.a)(B,2),M=R[0],J=R[1],z=Object(j.h)().id;function Q(){return(Q=Object(y.a)(N.a.mark((function e(){var t,n,c,s,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(w),e.next=3,Object(S.d)(Object(S.c)(Object(S.c)(H,"users",a.uid),"folders",z));case 3:return t=e.sent,u(t.data().name),n=Object(S.h)(Object(S.b)(Object(S.c)(Object(S.c)(H,"users",a.uid),"folders",z),"files")),console.log(n),e.next=9,Object(S.e)(n);case 9:c=e.sent,s=0,o={},c.forEach((function(e){0==s&&J([e.id,e.data()]),o[e.id]=e.data(),console.log(e.id," => ",e.data()),s++})),p(o),console.log(m);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){var e=m,t=e[M[0]];t.data=M[1].data,t.name=M[1].name,e[M[0]]=t,p(e)}function W(){return X.apply(this,arguments)}function X(){return(X=Object(y.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.k)(w,{timestamp:Object(S.i)()});case 2:e.sent,console.log("Timestamp updated");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t){return $.apply(this,arguments)}function $(){return $=Object(y.a)(N.a.mark((function e(t,n){var c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(S.c)(w,"files",t),e.next=3,Object(S.j)(c,{name:n.name,data:n.data});case 3:case"end":return e.stop()}}),e)}))),$.apply(this,arguments)}function q(){return _.apply(this,arguments)}function _(){return(_=Object(y.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.k)(w,{name:d});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){s||void 0==a||(k(Object(S.c)(Object(S.c)(H,"users",a.uid),"folders",z)),console.log(a.uid,z),console.log(w),function(){Q.apply(this,arguments)}())}),[s]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"complete-editor-container",children:[Object(f.jsxs)("div",{className:"sidebar-container",children:[Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsxs)("div",{className:"large-tab-container",children:[Object(f.jsxs)("div",{className:"folder-title-container",children:[Object(f.jsx)(x.a,{style:{marginLeft:"1rem"}}),A?Object(f.jsx)("input",{className:"folder-title-actual",onChange:function(e){u(e.target.value)},value:d}):Object(f.jsx)("p",{className:"folder-title-actual",children:d}),Object(f.jsx)("button",{onClick:function(){A?(q(),W(),U(!1)):U(!0)},children:A?Object(f.jsx)(x.b,{style:{marginLeft:"1rem"}}):Object(f.jsx)(C.a,{style:{marginLeft:"1rem"}})})]}),Object.keys(m).map((function(e){return Object(f.jsx)("button",{onClick:function(){return t=e,console.log(t),V(),void J([t,m[t]]);var t},className:"tab-button",children:Object(f.jsx)("span",{style:{color:e==M[0]?"grey":"black"},children:m[e].name})})}))]}),Object(f.jsx)("button",{onClick:function(){var e=m;e[1e10*Math.random()]={name:"Untitled.FileExtension",data:"Copy code here"},p(Object(P.a)({},e)),L("Save all files")},className:"tab-button save-button",style:{marginBottom:".5rem"},children:"Add File"}),Object(f.jsx)("button",{onClick:function(){for(var e in console.log("Starting upload process"),V(),console.log(m),m)Z(e,m[e]);L("All changes saved"),W(),q(),console.log("Hopefully done with upload process")},className:"tab-button save-button",children:D})]}),Object(f.jsx)("div",{className:"non-tab-container",children:Object(f.jsx)(G,{name:M[1].name,data:M[1].data,onTitleChange:function(e){var t=M[1];t.name=e,J([M[0],t]),L("Save all files")},onDataChange:function(e){var t=M[1];t.data=e,J([M[0],t]),L("Save all files")}})})]}),s?Object(f.jsx)(f.Fragment,{}):Object(f.jsxs)("div",{className:"downloading-options",children:[Object(f.jsxs)("button",{className:"download-button",children:[" ",Object(f.jsxs)(l.b,{to:"/download/"+w.id+"/"+a.uid,style:{color:"white",textDecoration:"none"},children:["Download All Files"," "]})]}),Object(f.jsx)("button",{className:"download-button",onClick:function(){var e="https://www.wyattcowley.com/template-manager/#/download/";e=e+z+"/"+a.uid,navigator.clipboard.writeText(e)},children:"Copy Download Url"}),Object(f.jsx)(K.a,{label:"Download Current File",filename:M[1].name,exportFile:function(){return M[1].data},style:{color:"white",textDecoration:"none"},className:"download-button"})]})]})},Q=Object(d.b)();var V=function(){var e=Object(b.a)(Q),t=Object(i.a)(e,3),n=t[0],a=t[1];return t[2],Object(c.useEffect)((function(){console.log(a),console.log(n)}),[a]),Object(f.jsx)(l.a,{children:Object(f.jsxs)(j.d,{children:[Object(f.jsx)(j.b,{path:"/signin",children:Object(f.jsx)(p,{})}),Object(f.jsxs)(j.b,{path:"/dashboard",children:[a||void 0!=n?Object(f.jsx)(f.Fragment,{}):Object(f.jsx)(j.a,{to:"signin"}),Object(f.jsx)(v,{}),Object(f.jsx)(L,{})]}),Object(f.jsx)(j.b,{path:"/create",children:Object(f.jsx)(B,{user:n})}),Object(f.jsxs)(j.b,{path:"/edit/:id",children:[Object(f.jsx)(v,{}),Object(f.jsx)(z,{})]}),Object(f.jsx)(j.b,{path:"/download/:id/:userId",children:Object(f.jsx)(A,{})}),Object(f.jsx)(j.b,{path:"/",children:a?Object(f.jsx)("h1",{children:"Loading..."}):void 0==n?Object(f.jsx)(j.a,{to:"/signin"}):Object(f.jsx)(j.a,{to:"dashboard"})})]})})},W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,92)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),s(e),o(e)}))};o.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(V,{})}),document.getElementById("root")),W()}},[[90,1,2]]]);
//# sourceMappingURL=main.996d8fba.chunk.js.map