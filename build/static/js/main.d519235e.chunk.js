(this["webpackJsonptemplate-manager"]=this["webpackJsonptemplate-manager"]||[]).push([[0],{52:function(e,t,n){},65:function(e,t,n){},75:function(e,t,n){},77:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var c=n(8),a=n.n(c),s=n(53),o=n.n(s),i=n(12),r=(n(65),n(54)),l=(n(85),Object(r.a)({apiKey:"AIzaSyATNn2F0KJSKE75CEonDPtY3Q9OVZXodm0",authDomain:"template-manager-4f0cc.firebaseapp.com",projectId:"template-manager-4f0cc",storageBucket:"template-manager-4f0cc.appspot.com",messagingSenderId:"558222395374",appId:"1:558222395374:web:44e98352458d99ba93b0ff",measurementId:"G-73KRE4N508"}),n(24)),j=n(15),b=n(30),d=n(26),u=n(7),O=new d.a,f=Object(d.b)(),h=function(e){var t=Object(c.useState)(!1),n=Object(i.a)(t,2),a=n[0],s=n[1];return Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{onClick:function(){Object(d.c)(f,O).then((function(e){d.a.credentialFromResult(e).accessToken,e.user;s(!0)})).catch((function(e){e.code,e.message,e.email,d.a.credentialFromError(e)}))},children:"Sign in with Google"}),a?Object(u.jsx)(j.a,{to:"/dashboard"}):Object(u.jsx)(u.Fragment,{})]})},m=n(29),p=(n(75),Object(d.b)()),x=function(e){var t=Object(j.g)(),n=Object(b.a)(p),c=Object(i.a)(n,3),a=c[0],s=c[1];c[2];return Object(u.jsxs)("div",{className:"top-nav",children:[Object(u.jsx)(m.a,{className:"icon"}),Object(u.jsx)("h2",{children:"Template Manager"}),Object(u.jsx)(l.b,{to:"/dashboard",style:{color:"black"},children:Object(u.jsx)("h2",{children:"Home"})}),Object(u.jsx)(l.b,{to:"/create",style:{color:"black"},children:Object(u.jsx)("h2",{children:"Create New"})}),Object(u.jsxs)("div",{className:"profile-section",children:[Object(u.jsx)("button",{onClick:function(){Object(d.d)(p).then((function(){t.push("/signin")})).catch((function(e){}))},className:"sign-out",children:Object(u.jsx)("h2",{className:"non-default-h2",children:"Sign Out"})}),s||void 0==a?Object(u.jsx)(u.Fragment,{}):Object(u.jsx)("div",{className:"profile-img-container",children:Object(u.jsx)("img",{src:a.photoURL,className:"profile-image"})})]})]})},g=n(1),v=n.n(g),w=n(2),y=n(33),N=n(14),k=n(36),S=function(e){var t=Object(c.useState)("Loading..."),n=Object(i.a)(t,2),a=n[0],s=n[1];return Object(c.useEffect)((function(){console.log(e.timestamp.toDate());var t=e.timestamp.toDate()+"";t=t.split(" "),console.log(t),t=t[4]+" "+t[1]+" "+t[2],s(t)}),[]),Object(u.jsxs)("div",{className:"folder-viewer-container",children:[Object(u.jsxs)("div",{className:"first-row",children:[Object(u.jsx)("p",{className:"folder-title",children:e.name}),Object(u.jsx)(l.b,{to:"/edit/"+e.id,className:"edit-link",children:Object(u.jsx)(k.a,{style:{width:"100%",height:"100%",fill:"rgb(44, 44, 83)"}})})]}),Object(u.jsx)("p",{children:"Last Edited "+a}),Object(u.jsxs)("div",{className:"last-row",children:[Object(u.jsx)(l.b,{to:"/download/"+e.id+"/"+e.userId,children:Object(u.jsx)("button",{className:"action-button",children:"Download all files"})}),Object(u.jsx)("button",{className:"action-button",onClick:function(){var t="https://www.wyattcowley.com/template-manager/#/download/";t=t+e.id+"/"+e.userId,navigator.clipboard.writeText(t)},children:"Copy download link"})]})]})},C=(n(77),Object(y.b)()),E=Object(N.f)(),F=function(e){var t=Object(b.a)(C),n=Object(i.a)(t,3),a=n[0],s=n[1],o=(n[2],Object(c.useState)({})),r=Object(i.a)(o,2),l=r[0],j=r[1];function d(){return(d=Object(w.a)(v.a.mark((function e(){var t,n,c,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(N.c)(E,"users",a.uid),n=Object(N.h)(Object(N.b)(t,"folders"),Object(N.g)("timestamp","desc")),e.next=4,Object(N.e)(n);case 4:c=e.sent,s={},c.forEach((function(e){s[e.id]=e.data()})),console.log(s),j(s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){s||function(){d.apply(this,arguments)}()}),[s]),Object(u.jsxs)("div",{className:"dashboard-container",children:[Object(u.jsx)("h1",{children:"Recent Templates"}),Object(u.jsx)("div",{className:"folder-container",children:Object.keys(l).map((function(e){return Object(u.jsx)(S,{name:l[e].name,id:e,userId:a.uid,timestamp:l[e].timestamp})}))})]})},L=n(27),D=(n(47),Object(L.f)()),I=function(e){var t=Object(j.h)().id,a=Object(j.h)().userId,s=Object(c.useState)("Loading"),o=Object(i.a)(s,2),r=(o[0],o[1],Object(c.useState)({})),b=Object(i.a)(r,2),d=b[0],O=b[1];function f(){return(f=Object(w.a)(v.a.mark((function e(){var n,c,s,o,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(L.c)(D,"users",a),c=Object(L.c)(n,"folders",t),e.next=4,Object(L.d)(c);case 4:return e.sent,s=Object(L.h)(Object(L.b)(c,"files")),console.log(s),e.next=9,Object(L.e)(s);case 9:o=e.sent,0,i={},o.forEach((function(e){i[e.id]=e.data(),console.log(e.id," => ",e.data())})),O(i),console.log("Set state"),console.log(d);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){console.log(t,a),function(){f.apply(this,arguments)}()}),[]),Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Warning: You are about to download the following files:"}),Object(u.jsx)(l.b,{to:"/home",children:"Return back to homepage"}),Object.keys(d).map((function(e){return Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:d[e].name}),Object(u.jsx)("span",{})]})})),Object(u.jsx)("button",{onClick:function(){var e=n(47);Object.keys(d).forEach((function(t){var n=new Blob([d[t].data],{type:"text/plain;charset=utf-8"});e.saveAs(n,[d[t].name])}))},children:"Download All"})]})},T=Object(N.f)(),A=function(e){var t=Object(j.g)();function n(){return(n=Object(w.a)(v.a.mark((function n(c){var a;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(N.j)(c,{uid:e.user.uid,displayName:e.user.displayName});case 2:return n.next=4,Object(N.a)(Object(N.b)(c,"folders"),{name:"Untitled",owner:e.user.uid});case 4:return a=n.sent,n.next=7,Object(N.j)(Object(N.c)(a,"files","Untitled.FileExtension"),{name:"Untitled.FileExtension",data:"Start typing here"});case 7:n.sent,console.log(a.id),t.push("/edit/"+a.id);case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(c.useEffect)((function(){console.log(e.user.uid),function(e){n.apply(this,arguments)}(Object(N.c)(T,"users",e.user.uid))}),[]),Object(u.jsx)(u.Fragment,{})},B=n(58),M=n(59),P=n.n(M),R=n(60),U=n.n(R),K=(n(52),n(83),function(e){var t=Object(c.useState)(!1),n=Object(i.a)(t,2),a=n[0],s=n[1],o=Object(c.useState)(e.name),r=Object(i.a)(o,2),l=r[0],j=r[1],b=Object(c.useState)(e.data),d=Object(i.a)(b,2),O=d[0],f=d[1];return Object(c.useEffect)((function(){j(e.name),f(e.data)}),[e]),Object(u.jsxs)("div",{className:"file-specific-section",children:[a?Object(u.jsx)("input",{value:l,onChange:function(e){j(e.target.value)},className:"title-entry"}):Object(u.jsx)("h2",{className:"file-title",children:e.name}),Object(u.jsx)("button",{onClick:function(){1==a&&e.onTitleChange(l),s(!a)},className:"edit-title-button",children:a?Object(u.jsx)(m.b,{className:"edit-title-icon"}):Object(u.jsx)(k.a,{className:"edit-title-icon"})}),Object(u.jsx)(U.a,{onChange:function(t){f(t),e.onDataChange(t)},height:"80%",width:"95%",className:"code-editor",theme:"xcode",name:"main-code-editor",value:O,editorProps:{$blockScrolling:!0}})]})}),J=Object(N.f)(),G=Object(y.b)(),H=function(e){var t=Object(b.a)(G),n=Object(i.a)(t,3),a=n[0],s=n[1],o=(n[2],Object(c.useState)("Loading...")),r=Object(i.a)(o,2),d=r[0],O=r[1],f=Object(c.useState)({saMPle:{data:"",name:""}}),h=Object(i.a)(f,2),p=h[0],x=h[1],g=Object(c.useState)({id:1}),y=Object(i.a)(g,2),S=y[0],C=y[1],E=Object(c.useState)("All Changes Saved"),F=Object(i.a)(E,2),L=F[0],D=F[1],I=Object(c.useState)(!1),T=Object(i.a)(I,2),A=T[0],M=T[1],R=Object(c.useState)(["Loading",{data:"Loading files...",name:"Loading..."}]),U=Object(i.a)(R,2),H=U[0],V=U[1],Y=Object(j.h)().id;function z(){return(z=Object(w.a)(v.a.mark((function e(){var t,n,c,s,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(S),e.next=3,Object(N.d)(Object(N.c)(Object(N.c)(J,"users",a.uid),"folders",Y));case 3:return t=e.sent,O(t.data().name),n=Object(N.h)(Object(N.b)(Object(N.c)(Object(N.c)(J,"users",a.uid),"folders",Y),"files")),console.log(n),e.next=9,Object(N.e)(n);case 9:c=e.sent,s=0,o={},c.forEach((function(e){0==s&&V([e.id,e.data()]),o[e.id]=e.data(),console.log(e.id," => ",e.data()),s++})),x(o),console.log(p);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){var e=p,t=e[H[0]];t.data=H[1].data,t.name=H[1].name,e[H[0]]=t,x(e)}function W(){return X.apply(this,arguments)}function X(){return(X=Object(w.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.k)(S,{timestamp:Object(N.i)()});case 2:e.sent,console.log("Timestamp updated");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t){return $.apply(this,arguments)}function $(){return $=Object(w.a)(v.a.mark((function e(t,n){var c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(N.c)(S,"files",t),e.next=3,Object(N.j)(c,{name:n.name,data:n.data});case 3:case"end":return e.stop()}}),e)}))),$.apply(this,arguments)}function q(){return _.apply(this,arguments)}function _(){return(_=Object(w.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.k)(S,{name:d});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){s||void 0==a||(C(Object(N.c)(Object(N.c)(J,"users",a.uid),"folders",Y)),console.log(a.uid,Y),console.log(S),function(){z.apply(this,arguments)}())}),[s]),Object(c.useEffect)((function(){window.addEventListener("beforeunload",(function(e){return e.returnValue="",e.preventDefault(),"Make sure to save your files!"}))})),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"complete-editor-container",children:[Object(u.jsxs)("div",{className:"sidebar-container",children:[Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsxs)("div",{className:"large-tab-container",children:[Object(u.jsxs)("div",{className:"folder-title-container",children:[Object(u.jsx)(m.a,{style:{marginLeft:"1rem"}}),A?Object(u.jsx)("input",{className:"folder-title-actual",onChange:function(e){O(e.target.value)},value:d}):Object(u.jsx)("p",{className:"folder-title-actual",children:d}),Object(u.jsx)("button",{onClick:function(){A?(q(),W(),M(!1)):M(!0)},children:A?Object(u.jsx)(m.b,{style:{marginLeft:"1rem"}}):Object(u.jsx)(k.a,{style:{marginLeft:"1rem"}})})]}),Object.keys(p).map((function(e){return Object(u.jsx)("button",{onClick:function(){return t=e,console.log(t),Q(),void V([t,p[t]]);var t},className:"tab-button",children:Object(u.jsx)("span",{style:{color:e==H[0]?"grey":"black"},children:p[e].name})})}))]}),Object(u.jsx)("button",{onClick:function(){var e=p;e[1e10*Math.random()]={name:"Untitled.FileExtension",data:"Copy code here"},x(Object(B.a)({},e)),D("Save all files")},className:"tab-button save-button",style:{marginBottom:".5rem"},children:"Add File"}),Object(u.jsx)("button",{onClick:function(){for(var e in console.log("Starting upload process"),Q(),console.log(p),p)Z(e,p[e]);D("All changes saved"),W(),q(),console.log("Hopefully done with upload process")},className:"tab-button save-button",children:L})]}),Object(u.jsx)("div",{className:"non-tab-container",children:Object(u.jsx)(K,{name:H[1].name,data:H[1].data,onTitleChange:function(e){var t=H[1];t.name=e,V([H[0],t]),D("Save all files")},onDataChange:function(e){var t=H[1];t.data=e,V([H[0],t]),D("Save all files")}})})]}),Object(u.jsxs)("div",{className:"downloading-options",children:[Object(u.jsx)(l.b,{to:"/download/"+S.id+"/"+a.uid,children:Object(u.jsx)("button",{className:"download-button",children:"Download All Files"})}),Object(u.jsx)(P.a,{label:"Download Current File",filename:H[1].name,exportFile:function(){return H[1].data},style:{color:"white",textDecoration:"none"},className:"download-button"})]})]})},V=Object(d.b)();var Y=function(){var e=Object(b.a)(V),t=Object(i.a)(e,3),n=t[0],a=t[1];return t[2],Object(c.useEffect)((function(){console.log(a),console.log(n)}),[a]),Object(u.jsx)(l.a,{children:Object(u.jsxs)(j.d,{children:[Object(u.jsx)(j.b,{path:"/signin",children:Object(u.jsx)(h,{})}),Object(u.jsxs)(j.b,{path:"/dashboard",children:[a||void 0!=n?Object(u.jsx)(u.Fragment,{}):Object(u.jsx)(j.a,{to:"signin"}),Object(u.jsx)(x,{}),Object(u.jsx)(F,{})]}),Object(u.jsx)(j.b,{path:"/create",children:Object(u.jsx)(A,{user:n})}),Object(u.jsxs)(j.b,{path:"/edit/:id",children:[Object(u.jsx)(x,{}),Object(u.jsx)(H,{})]}),Object(u.jsx)(j.b,{path:"/download/:id/:userId",children:Object(u.jsx)(I,{})}),Object(u.jsx)(j.b,{path:"/",children:a?Object(u.jsx)("h1",{children:"Loading..."}):void 0==n?Object(u.jsx)(j.a,{to:"/signin"}):Object(u.jsx)(j.a,{to:"dashboard"})})]})})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,86)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),s(e),o(e)}))};o.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(Y,{})}),document.getElementById("root")),z()}},[[84,1,2]]]);
//# sourceMappingURL=main.d519235e.chunk.js.map